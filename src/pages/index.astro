---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import DesignCard from "../components/DesignCard.astro";
import { getTopDesigns } from "../lib/firestore";

// Get top 3 designs for preview
const featuredDesigns = await getTopDesigns(3);
---

<Layout title="Home">
  <!-- Hero Section -->
  <div class="bg-linear-to-br from-indigo-600 to-purple-700 text-white">
    <div class="mx-auto max-w-7xl px-4 py-20 text-center">
      <h1 class="mb-6 text-5xl font-bold md:text-6xl">
        Vote for the Best Patch Designs
      </h1>
      <p class="mb-8 text-xl text-indigo-100 md:text-2xl">
        Submit your designs, vote for favorites, and see what gets made!
      </p>
      <div class="flex justify-center gap-4">
        <a
          href="/submit"
          class="rounded-lg bg-white px-8 py-4 text-lg font-semibold text-indigo-600 transition-colors hover:bg-gray-100"
        >
          Submit Design
        </a>
        <a
          href="/gallery"
          class="rounded-lg bg-indigo-500 px-8 py-4 text-lg font-semibold text-white transition-colors hover:bg-indigo-400"
        >
          Browse Gallery
        </a>
      </div>
    </div>
  </div>

  <!-- How It Works -->
  <div class="mx-auto max-w-7xl px-4 py-20">
    <h2 class="mb-12 text-center text-3xl font-bold text-gray-900">
      How It Works
    </h2>
    <div class="grid gap-8 md:grid-cols-3">
      <div class="text-center">
        <div class="mb-4 text-5xl">ğŸ“¤</div>
        <h3 class="mb-2 text-xl font-semibold">1. Submit</h3>
        <p class="text-gray-600">
          Upload your patch design with a title and description
        </p>
      </div>
      <div class="text-center">
        <div class="mb-4 text-5xl">ğŸ‘</div>
        <h3 class="mb-2 text-xl font-semibold">2. Vote</h3>
        <p class="text-gray-600">Browse designs and vote for your favorites</p>
      </div>
      <div class="text-center">
        <div class="mb-4 text-5xl">ğŸ†</div>
        <h3 class="mb-2 text-xl font-semibold">3. Win</h3>
        <p class="text-gray-600">Top designs get produced as real patches!</p>
      </div>
    </div>
  </div>

  <!-- Featured Designs -->
  {
    featuredDesigns.length > 0 && (
      <div class="bg-gray-50 py-20">
        <div class="mx-auto max-w-7xl px-4">
          <h2 class="mb-12 text-center text-3xl font-bold text-gray-900">
            ğŸ”¥ Trending Designs
          </h2>
          <div class="grid gap-8 md:grid-cols-3">
            {featuredDesigns.map((design) => (
              <DesignCard
                id={design.id}
                title={design.title}
                description={design.description}
                imageUrl={design.imageUrl}
                votes={design.votes}
              />
            ))}
          </div>
          <div class="mt-8 text-center">
            <a
              href="/leaderboard"
              class="font-semibold text-indigo-600 hover:text-indigo-700"
            >
              View Full Leaderboard â†’
            </a>
          </div>
        </div>
      </div>
    )
  }
</Layout>
